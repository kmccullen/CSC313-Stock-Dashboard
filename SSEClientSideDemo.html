<!DOCTYPE html>
<html>
  <head>
    <title>SSE Demo</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <div id="app"></div>
    <script src="react/react.js"></script>
    <script src="react/react-dom.js"></script>
    <script src="react/babel.js"></script>
    <script type="text/babel">

      const useState = React.useState;
      const useEffect = React.useEffect;
      
      function App() {
	  const [time, setTime] = useState('');
	  useEffect(() => {
              const eventSource = new EventSource('http://localhost:5000/events');
              eventSource.onmessage = (event) => {
		  const data = JSON.parse(event.data);
		  setTime(data.time);
              };
              return () => eventSource.close();
	  }, []);
	  return (
		  <div>
		  <h1>Server-Sent Events Demo</h1>
		  <p>Current Time: {time}</p>
		  </div>
	  );
      }
      ReactDOM.render(
              <App />,
	  document.getElementById('app'));
    </script>
  </body>
</html>
